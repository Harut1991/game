{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport _pt from \"prop-types\";\nimport { isFunction, isUndefined } from 'lodash';\nimport React, { useCallback, useRef, useMemo, useEffect, useState } from 'react';\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Animated, { useSharedValue, useAnimatedScrollHandler } from 'react-native-reanimated';\nimport { Colors, Spacings } from \"../../style\";\nimport { Constants, asBaseComponent } from \"../../commons/new\";\nimport View from \"../../components/view\";\nimport Fader, { FaderPosition } from \"../../components/fader\";\nimport Item, { ItemProps } from \"./Item\";\nimport Text from \"../../components/text\";\nimport usePresenter from \"./usePresenter\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar AnimatedFlatList = Animated.createAnimatedComponent(FlatList);\nexport var WheelPickerAlign;\n\n(function (WheelPickerAlign) {\n  WheelPickerAlign[\"CENTER\"] = \"center\";\n  WheelPickerAlign[\"RIGHT\"] = \"right\";\n  WheelPickerAlign[\"LEFT\"] = \"left\";\n})(WheelPickerAlign || (WheelPickerAlign = {}));\n\nvar WheelPicker = function WheelPicker(_ref) {\n  var propItems = _ref.items,\n      _ref$itemHeight = _ref.itemHeight,\n      itemHeight = _ref$itemHeight === void 0 ? 44 : _ref$itemHeight,\n      _ref$numberOfVisibleR = _ref.numberOfVisibleRows,\n      numberOfVisibleRows = _ref$numberOfVisibleR === void 0 ? 5 : _ref$numberOfVisibleR,\n      _ref$activeTextColor = _ref.activeTextColor,\n      activeTextColor = _ref$activeTextColor === void 0 ? Colors.primary : _ref$activeTextColor,\n      inactiveTextColor = _ref.inactiveTextColor,\n      textStyle = _ref.textStyle,\n      label = _ref.label,\n      labelStyle = _ref.labelStyle,\n      labelProps = _ref.labelProps,\n      onChange = _ref.onChange,\n      _ref$align = _ref.align,\n      align = _ref$align === void 0 ? WheelPickerAlign.CENTER : _ref$align,\n      style = _ref.style,\n      children = _ref.children,\n      initialValue = _ref.initialValue,\n      selectedValue = _ref.selectedValue,\n      testID = _ref.testID;\n  var scrollView = useRef();\n  var offset = useSharedValue(0);\n  var scrollHandler = useAnimatedScrollHandler(function (e) {\n    offset.value = e.contentOffset.y;\n  });\n\n  var _usePresenter = usePresenter({\n    initialValue: initialValue,\n    selectedValue: selectedValue,\n    items: propItems,\n    children: children,\n    itemHeight: itemHeight,\n    preferredNumVisibleRows: numberOfVisibleRows\n  }),\n      height = _usePresenter.height,\n      items = _usePresenter.items,\n      shouldControlComponent = _usePresenter.shouldControlComponent,\n      currentIndex = _usePresenter.index,\n      getRowItemAtOffset = _usePresenter.getRowItemAtOffset;\n\n  var prevInitialValue = useRef(initialValue);\n  var prevIndex = useRef(currentIndex);\n\n  var _useState = useState(currentIndex * itemHeight),\n      _useState2 = _slicedToArray(_useState, 2),\n      scrollOffset = _useState2[0],\n      setScrollOffset = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      flatListWidth = _useState4[0],\n      setFlatListWidth = _useState4[1];\n\n  var keyExtractor = useCallback(function (item, index) {\n    return item + \".\" + index;\n  }, []);\n  useEffect(function () {\n    if (shouldControlComponent(scrollOffset)) {\n      scrollToIndex(currentIndex, true);\n    }\n  });\n  useEffect(function () {\n    !isUndefined(initialValue) && scrollToIndex(currentIndex, true);\n  }, [currentIndex]);\n\n  var _onChange = useCallback(function (value, index) {\n    if (prevInitialValue.current !== initialValue) {\n      prevInitialValue.current = initialValue;\n    } else {\n      onChange == null ? void 0 : onChange(value, index);\n    }\n  }, [initialValue, onChange]);\n\n  var onValueChange = useCallback(function (event) {\n    setScrollOffset(event.nativeEvent.contentOffset.y);\n\n    var _getRowItemAtOffset = getRowItemAtOffset(event.nativeEvent.contentOffset.y),\n        index = _getRowItemAtOffset.index,\n        value = _getRowItemAtOffset.value;\n\n    _onChange(value, index);\n  }, [_onChange, getRowItemAtOffset]);\n\n  var onMomentumScrollEndAndroid = function onMomentumScrollEndAndroid(index) {\n    if (Constants.isAndroid && prevIndex.current !== index) {\n      var _items$index;\n\n      prevIndex.current = index;\n\n      _onChange(items == null ? void 0 : (_items$index = items[index]) == null ? void 0 : _items$index.value, index);\n    }\n  };\n\n  var scrollToOffset = function scrollToOffset(index, animated) {\n    var _scrollView$current;\n\n    if (isFunction((_scrollView$current = scrollView.current) == null ? void 0 : _scrollView$current.scrollToOffset)) {\n      var _scrollView$current2;\n\n      (_scrollView$current2 = scrollView.current) == null ? void 0 : _scrollView$current2.scrollToOffset({\n        offset: index * itemHeight,\n        animated: animated\n      });\n    } else {\n      var _scrollView$current3, _scrollView$current3$;\n\n      (_scrollView$current3 = scrollView.current) == null ? void 0 : (_scrollView$current3$ = _scrollView$current3.getNode()) == null ? void 0 : _scrollView$current3$.scrollToOffset({\n        offset: index * itemHeight,\n        animated: animated\n      });\n    }\n  };\n\n  var scrollToIndex = function scrollToIndex(index, animated) {\n    onMomentumScrollEndAndroid(index);\n    setTimeout(function () {\n      return scrollToOffset(index, animated);\n    }, 100);\n  };\n\n  var scrollToPassedIndex = useCallback(function () {\n    scrollToIndex(currentIndex, false);\n  }, []);\n  var selectItem = useCallback(function (index) {\n    scrollToIndex(index, true);\n  }, [itemHeight]);\n  var renderItem = useCallback(function (_ref2) {\n    var item = _ref2.item,\n        index = _ref2.index;\n    return _jsx(Item, _objectSpread(_objectSpread({\n      index: index,\n      itemHeight: itemHeight,\n      offset: offset,\n      activeColor: activeTextColor,\n      inactiveColor: inactiveTextColor,\n      style: textStyle\n    }, item), {}, {\n      fakeLabel: label,\n      fakeLabelStyle: labelStyle,\n      fakeLabelProps: labelProps,\n      centerH: !label,\n      onSelect: selectItem,\n      testID: testID + \".item_\" + index\n    }));\n  }, [itemHeight]);\n  var getItemLayout = useCallback(function (_data, index) {\n    return {\n      length: itemHeight,\n      offset: itemHeight * index,\n      index: index\n    };\n  }, [itemHeight]);\n  var updateFlatListWidth = useCallback(function (width) {\n    setFlatListWidth(width);\n  }, []);\n  var alignmentStyle = useMemo(function () {\n    return align === WheelPickerAlign.RIGHT ? {\n      alignSelf: undefined\n    } : align === WheelPickerAlign.LEFT ? {\n      alignSelf: 'flex-start'\n    } : {\n      alignSelf: 'center'\n    };\n  }, [align]);\n  var contentContainerStyle = useMemo(function () {\n    return [{\n      paddingVertical: height / 2 - itemHeight / 2\n    }, alignmentStyle];\n  }, [height, itemHeight, alignmentStyle]);\n  var labelContainerStyle = useMemo(function () {\n    return [{\n      position: 'absolute',\n      top: 0,\n      bottom: 0\n    }, alignmentStyle];\n  }, [alignmentStyle]);\n  var labelContainer = useMemo(function () {\n    return _jsx(View, {\n      style: labelContainerStyle,\n      width: flatListWidth,\n      pointerEvents: \"none\",\n      children: _jsx(View, {\n        style: styles.label,\n        centerV: true,\n        pointerEvents: \"none\",\n        children: _jsx(Text, _objectSpread(_objectSpread({\n          \"marginL-s2\": true,\n          \"marginR-s5\": true,\n          text80M: true\n        }, labelProps), {}, {\n          color: activeTextColor,\n          style: labelStyle,\n          children: label\n        }))\n      })\n    });\n  }, [flatListWidth, labelContainerStyle, label, labelProps, activeTextColor, labelStyle]);\n  var fader = useMemo(function () {\n    return function (position) {\n      return _jsx(Fader, {\n        visible: true,\n        position: position,\n        size: 60\n      });\n    };\n  }, []);\n  var separators = useMemo(function () {\n    return _jsx(View, {\n      absF: true,\n      centerV: true,\n      pointerEvents: \"none\",\n      children: _jsx(View, {\n        style: styles.separators\n      })\n    });\n  }, []);\n  return _jsxs(View, {\n    testID: testID,\n    \"bg-white\": true,\n    style: style,\n    children: [_jsx(View, {\n      row: true,\n      centerH: true,\n      children: _jsx(View, {\n        flexG: true,\n        children: _jsx(AnimatedFlatList, {\n          testID: testID + \".list\",\n          height: height,\n          data: items,\n          keyExtractor: keyExtractor,\n          scrollEventThrottle: 100,\n          onScroll: scrollHandler,\n          onMomentumScrollEnd: onValueChange,\n          showsVerticalScrollIndicator: false,\n          onLayout: scrollToPassedIndex,\n          ref: scrollView,\n          contentContainerStyle: contentContainerStyle,\n          snapToInterval: itemHeight,\n          decelerationRate: Constants.isAndroid ? 0.98 : 'normal',\n          renderItem: renderItem,\n          getItemLayout: getItemLayout,\n          initialScrollIndex: currentIndex,\n          onContentSizeChange: updateFlatListWidth,\n          centerContent: align === 'center' && Constants.isRTL\n        })\n      })\n    }), label && labelContainer, fader(FaderPosition.BOTTOM), fader(FaderPosition.TOP), separators]\n  });\n};\n\nWheelPicker.propTypes = {\n  items: _pt.array,\n  itemHeight: _pt.number,\n  numberOfVisibleRows: _pt.number,\n  activeTextColor: _pt.string,\n  inactiveTextColor: _pt.string,\n  label: _pt.string,\n  onChange: _pt.func,\n  children: _pt.oneOfType([_pt.element, _pt.arrayOf(_pt.element)]),\n  align: _pt.oneOf([\"center\", \"right\", \"left\"]),\n  testID: _pt.string\n};\nWheelPicker.alignments = WheelPickerAlign;\nWheelPicker.displayName = 'Incubator.WheelPicker';\nexport default asBaseComponent(WheelPicker);\nexport { ItemProps as WheelPickerItemProps };\nvar styles = StyleSheet.create({\n  separators: {\n    borderTopWidth: 1,\n    borderBottomWidth: 1,\n    height: Spacings.s9,\n    borderColor: Colors.grey60\n  },\n  label: {\n    position: 'absolute',\n    right: 0,\n    top: 0,\n    bottom: 0\n  }\n});","map":{"version":3,"sources":["C:/Users/Lenovo/Desktop/Harut/game-expo/node_modules/react-native-ui-lib/src/incubator/WheelPicker/index.js"],"names":["_pt","isFunction","isUndefined","React","useCallback","useRef","useMemo","useEffect","useState","Animated","useSharedValue","useAnimatedScrollHandler","Colors","Spacings","Constants","asBaseComponent","View","Fader","FaderPosition","Item","ItemProps","Text","usePresenter","AnimatedFlatList","createAnimatedComponent","FlatList","WheelPickerAlign","WheelPicker","propItems","items","itemHeight","numberOfVisibleRows","activeTextColor","primary","inactiveTextColor","textStyle","label","labelStyle","labelProps","onChange","align","CENTER","style","children","initialValue","selectedValue","testID","scrollView","offset","scrollHandler","e","value","contentOffset","y","preferredNumVisibleRows","height","shouldControlComponent","currentIndex","index","getRowItemAtOffset","prevInitialValue","prevIndex","scrollOffset","setScrollOffset","flatListWidth","setFlatListWidth","keyExtractor","item","scrollToIndex","_onChange","current","onValueChange","event","nativeEvent","onMomentumScrollEndAndroid","isAndroid","scrollToOffset","animated","getNode","setTimeout","scrollToPassedIndex","selectItem","renderItem","getItemLayout","_data","length","updateFlatListWidth","width","alignmentStyle","RIGHT","alignSelf","undefined","LEFT","contentContainerStyle","paddingVertical","labelContainerStyle","position","top","bottom","labelContainer","styles","fader","separators","isRTL","BOTTOM","TOP","propTypes","array","number","string","func","oneOfType","element","arrayOf","oneOf","alignments","displayName","WheelPickerItemProps","StyleSheet","create","borderTopWidth","borderBottomWidth","s9","borderColor","grey60","right"],"mappings":";;;;;;;AAAA,OAAOA,GAAP,MAAgB,YAAhB;AAEA,SAASC,UAAT,EAAqBC,WAArB,QAAwC,QAAxC;AACA,OAAOC,KAAP,IAAgBC,WAAhB,EAA6BC,MAA7B,EAAqCC,OAArC,EAA8CC,SAA9C,EAAyDC,QAAzD,QAAyE,OAAzE;;;AAEA,OAAOC,QAAP,IAAmBC,cAAnB,EAAmCC,wBAAnC,QAAmE,yBAAnE;AACA,SAASC,MAAT,EAAiBC,QAAjB;AACA,SAASC,SAAT,EAAoBC,eAApB;AACA,OAAOC,IAAP;AACA,OAAOC,KAAP,IAAgBC,aAAhB;AACA,OAAOC,IAAP,IAAeC,SAAf;AACA,OAAOC,IAAP;AACA,OAAOC,YAAP;;;AACA,IAAMC,gBAAgB,GAAGd,QAAQ,CAACe,uBAAT,CAAiCC,QAAjC,CAAzB;AACA,OAAO,IAAIC,gBAAJ;;AAEP,CAAC,UAAUA,gBAAV,EAA4B;AAC3BA,EAAAA,gBAAgB,CAAC,QAAD,CAAhB,GAA6B,QAA7B;AACAA,EAAAA,gBAAgB,CAAC,OAAD,CAAhB,GAA4B,OAA5B;AACAA,EAAAA,gBAAgB,CAAC,MAAD,CAAhB,GAA2B,MAA3B;AACD,CAJD,EAIGA,gBAAgB,KAAKA,gBAAgB,GAAG,EAAxB,CAJnB;;AAMA,IAAMC,WAAW,GAAG,SAAdA,WAAc,OAiBd;AAAA,MAhBGC,SAgBH,QAhBJC,KAgBI;AAAA,6BAfJC,UAeI;AAAA,MAfJA,UAeI,gCAfS,EAeT;AAAA,mCAdJC,mBAcI;AAAA,MAdJA,mBAcI,sCAdkB,CAclB;AAAA,kCAbJC,eAaI;AAAA,MAbJA,eAaI,qCAbcpB,MAAM,CAACqB,OAarB;AAAA,MAZJC,iBAYI,QAZJA,iBAYI;AAAA,MAXJC,SAWI,QAXJA,SAWI;AAAA,MAVJC,KAUI,QAVJA,KAUI;AAAA,MATJC,UASI,QATJA,UASI;AAAA,MARJC,UAQI,QARJA,UAQI;AAAA,MAPJC,QAOI,QAPJA,QAOI;AAAA,wBANJC,KAMI;AAAA,MANJA,KAMI,2BANId,gBAAgB,CAACe,MAMrB;AAAA,MALJC,KAKI,QALJA,KAKI;AAAA,MAJJC,QAII,QAJJA,QAII;AAAA,MAHJC,YAGI,QAHJA,YAGI;AAAA,MAFJC,aAEI,QAFJA,aAEI;AAAA,MADJC,MACI,QADJA,MACI;AACJ,MAAMC,UAAU,GAAG1C,MAAM,EAAzB;AACA,MAAM2C,MAAM,GAAGtC,cAAc,CAAC,CAAD,CAA7B;AACA,MAAMuC,aAAa,GAAGtC,wBAAwB,CAAC,UAAAuC,CAAC,EAAI;AAClDF,IAAAA,MAAM,CAACG,KAAP,GAAeD,CAAC,CAACE,aAAF,CAAgBC,CAA/B;AACD,GAF6C,CAA9C;;AAGA,sBAMI/B,YAAY,CAAC;AACfsB,IAAAA,YAAY,EAAZA,YADe;AAEfC,IAAAA,aAAa,EAAbA,aAFe;AAGfhB,IAAAA,KAAK,EAAED,SAHQ;AAIfe,IAAAA,QAAQ,EAARA,QAJe;AAKfb,IAAAA,UAAU,EAAVA,UALe;AAMfwB,IAAAA,uBAAuB,EAAEvB;AANV,GAAD,CANhB;AAAA,MACEwB,MADF,iBACEA,MADF;AAAA,MAEE1B,KAFF,iBAEEA,KAFF;AAAA,MAGE2B,sBAHF,iBAGEA,sBAHF;AAAA,MAISC,YAJT,iBAIEC,KAJF;AAAA,MAKEC,kBALF,iBAKEA,kBALF;;AAcA,MAAMC,gBAAgB,GAAGvD,MAAM,CAACuC,YAAD,CAA/B;AACA,MAAMiB,SAAS,GAAGxD,MAAM,CAACoD,YAAD,CAAxB;;AACA,kBAAwCjD,QAAQ,CAACiD,YAAY,GAAG3B,UAAhB,CAAhD;AAAA;AAAA,MAAOgC,YAAP;AAAA,MAAqBC,eAArB;;AACA,mBAA0CvD,QAAQ,CAAC,CAAD,CAAlD;AAAA;AAAA,MAAOwD,aAAP;AAAA,MAAsBC,gBAAtB;;AACA,MAAMC,YAAY,GAAG9D,WAAW,CAAC,UAAC+D,IAAD,EAAOT,KAAP;AAAA,WAAoBS,IAApB,SAA4BT,KAA5B;AAAA,GAAD,EAAsC,EAAtC,CAAhC;AACAnD,EAAAA,SAAS,CAAC,YAAM;AAEd,QAAIiD,sBAAsB,CAACM,YAAD,CAA1B,EAA0C;AACxCM,MAAAA,aAAa,CAACX,YAAD,EAAe,IAAf,CAAb;AACD;AACF,GALQ,CAAT;AAMAlD,EAAAA,SAAS,CAAC,YAAM;AAEd,KAACL,WAAW,CAAC0C,YAAD,CAAZ,IAA8BwB,aAAa,CAACX,YAAD,EAAe,IAAf,CAA3C;AACD,GAHQ,EAGN,CAACA,YAAD,CAHM,CAAT;;AAKA,MAAMY,SAAS,GAAGjE,WAAW,CAAC,UAAC+C,KAAD,EAAQO,KAAR,EAAkB;AAC9C,QAAIE,gBAAgB,CAACU,OAAjB,KAA6B1B,YAAjC,EAA+C;AAE7CgB,MAAAA,gBAAgB,CAACU,OAAjB,GAA2B1B,YAA3B;AACD,KAHD,MAGO;AACLL,MAAAA,QAAQ,QAAR,YAAAA,QAAQ,CAAGY,KAAH,EAAUO,KAAV,CAAR;AACD;AACF,GAP4B,EAO1B,CAACd,YAAD,EAAeL,QAAf,CAP0B,CAA7B;;AASA,MAAMgC,aAAa,GAAGnE,WAAW,CAAC,UAAAoE,KAAK,EAAI;AACzCT,IAAAA,eAAe,CAACS,KAAK,CAACC,WAAN,CAAkBrB,aAAlB,CAAgCC,CAAjC,CAAf;;AACA,8BAGIM,kBAAkB,CAACa,KAAK,CAACC,WAAN,CAAkBrB,aAAlB,CAAgCC,CAAjC,CAHtB;AAAA,QACEK,KADF,uBACEA,KADF;AAAA,QAEEP,KAFF,uBAEEA,KAFF;;AAKAkB,IAAAA,SAAS,CAAClB,KAAD,EAAQO,KAAR,CAAT;AACD,GARgC,EAQ9B,CAACW,SAAD,EAAYV,kBAAZ,CAR8B,CAAjC;;AAUA,MAAMe,0BAA0B,GAAG,SAA7BA,0BAA6B,CAAAhB,KAAK,EAAI;AAE1C,QAAI5C,SAAS,CAAC6D,SAAV,IAAuBd,SAAS,CAACS,OAAV,KAAsBZ,KAAjD,EAAwD;AAAA;;AACtDG,MAAAA,SAAS,CAACS,OAAV,GAAoBZ,KAApB;;AAEAW,MAAAA,SAAS,CAACxC,KAAD,oCAACA,KAAK,CAAG6B,KAAH,CAAN,qBAAC,aAAgBP,KAAjB,EAAwBO,KAAxB,CAAT;AACD;AACF,GAPD;;AASA,MAAMkB,cAAc,GAAG,SAAjBA,cAAiB,CAAClB,KAAD,EAAQmB,QAAR,EAAqB;AAAA;;AAG1C,QAAI5E,UAAU,wBAAC8C,UAAU,CAACuB,OAAZ,qBAAC,oBAAoBM,cAArB,CAAd,EAAoD;AAAA;;AAElD,8BAAA7B,UAAU,CAACuB,OAAX,0CAAoBM,cAApB,CAAmC;AACjC5B,QAAAA,MAAM,EAAEU,KAAK,GAAG5B,UADiB;AAEjC+C,QAAAA,QAAQ,EAARA;AAFiC,OAAnC;AAID,KAND,MAMO;AAAA;;AAEL,8BAAA9B,UAAU,CAACuB,OAAX,mEAAoBQ,OAApB,6CAA+BF,cAA/B,CAA8C;AAC5C5B,QAAAA,MAAM,EAAEU,KAAK,GAAG5B,UAD4B;AAE5C+C,QAAAA,QAAQ,EAARA;AAF4C,OAA9C;AAID;AACF,GAhBD;;AAkBA,MAAMT,aAAa,GAAG,SAAhBA,aAAgB,CAACV,KAAD,EAAQmB,QAAR,EAAqB;AACzCH,IAAAA,0BAA0B,CAAChB,KAAD,CAA1B;AACAqB,IAAAA,UAAU,CAAC;AAAA,aAAMH,cAAc,CAAClB,KAAD,EAAQmB,QAAR,CAApB;AAAA,KAAD,EAAwC,GAAxC,CAAV;AACD,GAHD;;AAKA,MAAMG,mBAAmB,GAAG5E,WAAW,CAAC,YAAM;AAC5CgE,IAAAA,aAAa,CAACX,YAAD,EAAe,KAAf,CAAb;AACD,GAFsC,EAEpC,EAFoC,CAAvC;AAGA,MAAMwB,UAAU,GAAG7E,WAAW,CAAC,UAAAsD,KAAK,EAAI;AACtCU,IAAAA,aAAa,CAACV,KAAD,EAAQ,IAAR,CAAb;AACD,GAF6B,EAE3B,CAAC5B,UAAD,CAF2B,CAA9B;AAGA,MAAMoD,UAAU,GAAG9E,WAAW,CAAC,iBAGzB;AAAA,QAFJ+D,IAEI,SAFJA,IAEI;AAAA,QADJT,KACI,SADJA,KACI;AACJ,WAAO,KAAC,IAAD;AAAM,MAAA,KAAK,EAAEA,KAAb;AAAoB,MAAA,UAAU,EAAE5B,UAAhC;AAA4C,MAAA,MAAM,EAAEkB,MAApD;AAA4D,MAAA,WAAW,EAAEhB,eAAzE;AAA0F,MAAA,aAAa,EAAEE,iBAAzG;AAA4H,MAAA,KAAK,EAAEC;AAAnI,OAAkJgC,IAAlJ;AAAwJ,MAAA,SAAS,EAAE/B,KAAnK;AAA0K,MAAA,cAAc,EAAEC,UAA1L;AAAsM,MAAA,cAAc,EAAEC,UAAtN;AAAkO,MAAA,OAAO,EAAE,CAACF,KAA5O;AAAmP,MAAA,QAAQ,EAAE6C,UAA7P;AAAyQ,MAAA,MAAM,EAAKnC,MAAL,cAAoBY;AAAnS,OAAP;AACD,GAL6B,EAK3B,CAAC5B,UAAD,CAL2B,CAA9B;AAMA,MAAMqD,aAAa,GAAG/E,WAAW,CAAC,UAACgF,KAAD,EAAQ1B,KAAR,EAAkB;AAClD,WAAO;AACL2B,MAAAA,MAAM,EAAEvD,UADH;AAELkB,MAAAA,MAAM,EAAElB,UAAU,GAAG4B,KAFhB;AAGLA,MAAAA,KAAK,EAALA;AAHK,KAAP;AAKD,GANgC,EAM9B,CAAC5B,UAAD,CAN8B,CAAjC;AAOA,MAAMwD,mBAAmB,GAAGlF,WAAW,CAAC,UAAAmF,KAAK,EAAI;AAC/CtB,IAAAA,gBAAgB,CAACsB,KAAD,CAAhB;AACD,GAFsC,EAEpC,EAFoC,CAAvC;AAGA,MAAMC,cAAc,GAAGlF,OAAO,CAAC,YAAM;AACnC,WAAOkC,KAAK,KAAKd,gBAAgB,CAAC+D,KAA3B,GAAmC;AACxCC,MAAAA,SAAS,EAAEC;AAD6B,KAAnC,GAEHnD,KAAK,KAAKd,gBAAgB,CAACkE,IAA3B,GAAkC;AACpCF,MAAAA,SAAS,EAAE;AADyB,KAAlC,GAEA;AACFA,MAAAA,SAAS,EAAE;AADT,KAJJ;AAOD,GAR6B,EAQ3B,CAAClD,KAAD,CAR2B,CAA9B;AASA,MAAMqD,qBAAqB,GAAGvF,OAAO,CAAC,YAAM;AAC1C,WAAO,CAAC;AACNwF,MAAAA,eAAe,EAAEvC,MAAM,GAAG,CAAT,GAAazB,UAAU,GAAG;AADrC,KAAD,EAEJ0D,cAFI,CAAP;AAGD,GAJoC,EAIlC,CAACjC,MAAD,EAASzB,UAAT,EAAqB0D,cAArB,CAJkC,CAArC;AAKA,MAAMO,mBAAmB,GAAGzF,OAAO,CAAC,YAAM;AACxC,WAAO,CAAC;AACN0F,MAAAA,QAAQ,EAAE,UADJ;AAENC,MAAAA,GAAG,EAAE,CAFC;AAGNC,MAAAA,MAAM,EAAE;AAHF,KAAD,EAIJV,cAJI,CAAP;AAKD,GANkC,EAMhC,CAACA,cAAD,CANgC,CAAnC;AAOA,MAAMW,cAAc,GAAG7F,OAAO,CAAC,YAAM;AACnC,WACE,KAAC,IAAD;AAAM,MAAA,KAAK,EAAEyF,mBAAb;AAAkC,MAAA,KAAK,EAAE/B,aAAzC;AAAwD,MAAA,aAAa,EAAC,MAAtE;AAAA,gBACE,KAAC,IAAD;AAAM,QAAA,KAAK,EAAEoC,MAAM,CAAChE,KAApB;AAA2B,QAAA,OAAO,MAAlC;AAAmC,QAAA,aAAa,EAAC,MAAjD;AAAA,kBACE,KAAC,IAAD;AAAM,4BAAN;AAAiB,4BAAjB;AAA4B,UAAA,OAAO;AAAnC,WAAwCE,UAAxC;AAAoD,UAAA,KAAK,EAAEN,eAA3D;AAA4E,UAAA,KAAK,EAAEK,UAAnF;AAAA,oBACGD;AADH;AADF;AADF,MADF;AASD,GAV6B,EAU3B,CAAC4B,aAAD,EAAgB+B,mBAAhB,EAAqC3D,KAArC,EAA4CE,UAA5C,EAAwDN,eAAxD,EAAyEK,UAAzE,CAV2B,CAA9B;AAWA,MAAMgE,KAAK,GAAG/F,OAAO,CAAC;AAAA,WAAM,UAAA0F,QAAQ,EAAI;AACtC,aAAO,KAAC,KAAD;AAAO,QAAA,OAAO,MAAd;AAAe,QAAA,QAAQ,EAAEA,QAAzB;AAAmC,QAAA,IAAI,EAAE;AAAzC,QAAP;AACD,KAFqB;AAAA,GAAD,EAElB,EAFkB,CAArB;AAGA,MAAMM,UAAU,GAAGhG,OAAO,CAAC,YAAM;AAC/B,WAAO,KAAC,IAAD;AAAM,MAAA,IAAI,MAAV;AAAW,MAAA,OAAO,MAAlB;AAAmB,MAAA,aAAa,EAAC,MAAjC;AAAA,gBACH,KAAC,IAAD;AAAM,QAAA,KAAK,EAAE8F,MAAM,CAACE;AAApB;AADG,MAAP;AAGD,GAJyB,EAIvB,EAJuB,CAA1B;AAKA,SAAO,MAAC,IAAD;AAAM,IAAA,MAAM,EAAExD,MAAd;AAAsB,oBAAtB;AAA+B,IAAA,KAAK,EAAEJ,KAAtC;AAAA,eACH,KAAC,IAAD;AAAM,MAAA,GAAG,MAAT;AAAU,MAAA,OAAO,MAAjB;AAAA,gBACE,KAAC,IAAD;AAAM,QAAA,KAAK,MAAX;AAAA,kBACE,KAAC,gBAAD;AAAkB,UAAA,MAAM,EAAKI,MAAL,UAAxB;AAA4C,UAAA,MAAM,EAAES,MAApD;AAA4D,UAAA,IAAI,EAAE1B,KAAlE;AACF,UAAA,YAAY,EAAEqC,YADZ;AAC0B,UAAA,mBAAmB,EAAE,GAD/C;AACoD,UAAA,QAAQ,EAAEjB,aAD9D;AAC6E,UAAA,mBAAmB,EAAEsB,aADlG;AACiH,UAAA,4BAA4B,EAAE,KAD/I;AACsJ,UAAA,QAAQ,EAAES,mBADhK;AAEF,UAAA,GAAG,EAAEjC,UAFH;AAGF,UAAA,qBAAqB,EAAE8C,qBAHrB;AAG4C,UAAA,cAAc,EAAE/D,UAH5D;AAGwE,UAAA,gBAAgB,EAAEhB,SAAS,CAAC6D,SAAV,GAAsB,IAAtB,GAA6B,QAHvH;AAGiI,UAAA,UAAU,EAAEO,UAH7I;AAGyJ,UAAA,aAAa,EAAEC,aAHxK;AAGuL,UAAA,kBAAkB,EAAE1B,YAH3M;AAGyN,UAAA,mBAAmB,EAAE6B,mBAH9O;AAKF,UAAA,aAAa,EAAE9C,KAAK,KAAK,QAAV,IAAsB1B,SAAS,CAACyF;AAL7C;AADF;AADF,MADG,EAWFnE,KAAK,IAAI+D,cAXP,EAYFE,KAAK,CAACnF,aAAa,CAACsF,MAAf,CAZH,EAaFH,KAAK,CAACnF,aAAa,CAACuF,GAAf,CAbH,EAcFH,UAdE;AAAA,IAAP;AAgBD,CAtLD;;AAwLA3E,WAAW,CAAC+E,SAAZ,GAAwB;AAItB7E,EAAAA,KAAK,EAAE7B,GAAG,CAAC2G,KAJW;AAUtB7E,EAAAA,UAAU,EAAE9B,GAAG,CAAC4G,MAVM;AAgBtB7E,EAAAA,mBAAmB,EAAE/B,GAAG,CAAC4G,MAhBH;AAqBtB5E,EAAAA,eAAe,EAAEhC,GAAG,CAAC6G,MArBC;AA0BtB3E,EAAAA,iBAAiB,EAAElC,GAAG,CAAC6G,MA1BD;AA+BtBzE,EAAAA,KAAK,EAAEpC,GAAG,CAAC6G,MA/BW;AAoCtBtE,EAAAA,QAAQ,EAAEvC,GAAG,CAAC8G,IApCQ;AAyCtBnE,EAAAA,QAAQ,EAAE3C,GAAG,CAAC+G,SAAJ,CAAc,CAAC/G,GAAG,CAACgH,OAAL,EAAchH,GAAG,CAACiH,OAAJ,CAAYjH,GAAG,CAACgH,OAAhB,CAAd,CAAd,CAzCY;AA8CtBxE,EAAAA,KAAK,EAAExC,GAAG,CAACkH,KAAJ,CAAU,CAAC,QAAD,EAAW,OAAX,EAAoB,MAApB,CAAV,CA9Ce;AA+CtBpE,EAAAA,MAAM,EAAE9C,GAAG,CAAC6G;AA/CU,CAAxB;AAiDAlF,WAAW,CAACwF,UAAZ,GAAyBzF,gBAAzB;AACAC,WAAW,CAACyF,WAAZ,GAA0B,uBAA1B;AACA,eAAerG,eAAe,CAACY,WAAD,CAA9B;AACA,SAASP,SAAS,IAAIiG,oBAAtB;AACA,IAAMjB,MAAM,GAAGkB,UAAU,CAACC,MAAX,CAAkB;AAC/BjB,EAAAA,UAAU,EAAE;AACVkB,IAAAA,cAAc,EAAE,CADN;AAEVC,IAAAA,iBAAiB,EAAE,CAFT;AAGVlE,IAAAA,MAAM,EAAE1C,QAAQ,CAAC6G,EAHP;AAIVC,IAAAA,WAAW,EAAE/G,MAAM,CAACgH;AAJV,GADmB;AAO/BxF,EAAAA,KAAK,EAAE;AACL4D,IAAAA,QAAQ,EAAE,UADL;AAEL6B,IAAAA,KAAK,EAAE,CAFF;AAGL5B,IAAAA,GAAG,EAAE,CAHA;AAILC,IAAAA,MAAM,EAAE;AAJH;AAPwB,CAAlB,CAAf","sourcesContent":["import _pt from \"prop-types\";\n// TODO: Support style customization\nimport { isFunction, isUndefined } from 'lodash';\nimport React, { useCallback, useRef, useMemo, useEffect, useState } from 'react';\nimport { FlatList, StyleSheet } from 'react-native';\nimport Animated, { useSharedValue, useAnimatedScrollHandler } from 'react-native-reanimated';\nimport { Colors, Spacings } from \"../../style\";\nimport { Constants, asBaseComponent } from \"../../commons/new\";\nimport View from \"../../components/view\";\nimport Fader, { FaderPosition } from \"../../components/fader\";\nimport Item, { ItemProps } from \"./Item\";\nimport Text from \"../../components/text\";\nimport usePresenter from \"./usePresenter\";\nconst AnimatedFlatList = Animated.createAnimatedComponent(FlatList);\nexport let WheelPickerAlign;\n\n(function (WheelPickerAlign) {\n  WheelPickerAlign[\"CENTER\"] = \"center\";\n  WheelPickerAlign[\"RIGHT\"] = \"right\";\n  WheelPickerAlign[\"LEFT\"] = \"left\";\n})(WheelPickerAlign || (WheelPickerAlign = {}));\n\nconst WheelPicker = ({\n  items: propItems,\n  itemHeight = 44,\n  numberOfVisibleRows = 5,\n  activeTextColor = Colors.primary,\n  inactiveTextColor,\n  textStyle,\n  label,\n  labelStyle,\n  labelProps,\n  onChange,\n  align = WheelPickerAlign.CENTER,\n  style,\n  children,\n  initialValue,\n  selectedValue,\n  testID\n}) => {\n  const scrollView = useRef();\n  const offset = useSharedValue(0);\n  const scrollHandler = useAnimatedScrollHandler(e => {\n    offset.value = e.contentOffset.y;\n  });\n  const {\n    height,\n    items,\n    shouldControlComponent,\n    index: currentIndex,\n    getRowItemAtOffset\n  } = usePresenter({\n    initialValue,\n    selectedValue,\n    items: propItems,\n    children,\n    itemHeight,\n    preferredNumVisibleRows: numberOfVisibleRows\n  });\n  const prevInitialValue = useRef(initialValue);\n  const prevIndex = useRef(currentIndex);\n  const [scrollOffset, setScrollOffset] = useState(currentIndex * itemHeight);\n  const [flatListWidth, setFlatListWidth] = useState(0);\n  const keyExtractor = useCallback((item, index) => `${item}.${index}`, []);\n  useEffect(() => {\n    // This effect enforce the index to be controlled by selectedValue passed by the user\n    if (shouldControlComponent(scrollOffset)) {\n      scrollToIndex(currentIndex, true);\n    }\n  });\n  useEffect(() => {\n    // This effect making sure to reset index if initialValue has changed\n    !isUndefined(initialValue) && scrollToIndex(currentIndex, true);\n  }, [currentIndex]);\n\n  const _onChange = useCallback((value, index) => {\n    if (prevInitialValue.current !== initialValue) {\n      // don't invoke 'onChange' if 'initialValue' changed\n      prevInitialValue.current = initialValue;\n    } else {\n      onChange?.(value, index);\n    }\n  }, [initialValue, onChange]);\n\n  const onValueChange = useCallback(event => {\n    setScrollOffset(event.nativeEvent.contentOffset.y);\n    const {\n      index,\n      value\n    } = getRowItemAtOffset(event.nativeEvent.contentOffset.y);\n\n    _onChange(value, index);\n  }, [_onChange, getRowItemAtOffset]);\n\n  const onMomentumScrollEndAndroid = index => {\n    // handle Android bug: ScrollView does not call 'onMomentumScrollEnd' when scrolled programmatically (https://github.com/facebook/react-native/issues/26661)\n    if (Constants.isAndroid && prevIndex.current !== index) {\n      prevIndex.current = index;\n\n      _onChange(items?.[index]?.value, index);\n    }\n  };\n\n  const scrollToOffset = (index, animated) => {\n    // TODO: we should remove this split (the getNode section) in V6 and remove support for reanimated 1\n    //@ts-expect-error for some reason scrollToOffset isn't recognized\n    if (isFunction(scrollView.current?.scrollToOffset)) {\n      //@ts-expect-error\n      scrollView.current?.scrollToOffset({\n        offset: index * itemHeight,\n        animated\n      });\n    } else {\n      //@ts-expect-error\n      scrollView.current?.getNode()?.scrollToOffset({\n        offset: index * itemHeight,\n        animated\n      });\n    }\n  };\n\n  const scrollToIndex = (index, animated) => {\n    onMomentumScrollEndAndroid(index);\n    setTimeout(() => scrollToOffset(index, animated), 100);\n  };\n\n  const scrollToPassedIndex = useCallback(() => {\n    scrollToIndex(currentIndex, false);\n  }, []);\n  const selectItem = useCallback(index => {\n    scrollToIndex(index, true);\n  }, [itemHeight]);\n  const renderItem = useCallback(({\n    item,\n    index\n  }) => {\n    return <Item index={index} itemHeight={itemHeight} offset={offset} activeColor={activeTextColor} inactiveColor={inactiveTextColor} style={textStyle} {...item} fakeLabel={label} fakeLabelStyle={labelStyle} fakeLabelProps={labelProps} centerH={!label} onSelect={selectItem} testID={`${testID}.item_${index}`} />;\n  }, [itemHeight]);\n  const getItemLayout = useCallback((_data, index) => {\n    return {\n      length: itemHeight,\n      offset: itemHeight * index,\n      index\n    };\n  }, [itemHeight]);\n  const updateFlatListWidth = useCallback(width => {\n    setFlatListWidth(width);\n  }, []);\n  const alignmentStyle = useMemo(() => {\n    return align === WheelPickerAlign.RIGHT ? {\n      alignSelf: undefined\n    } : align === WheelPickerAlign.LEFT ? {\n      alignSelf: 'flex-start'\n    } : {\n      alignSelf: 'center'\n    };\n  }, [align]);\n  const contentContainerStyle = useMemo(() => {\n    return [{\n      paddingVertical: height / 2 - itemHeight / 2\n    }, alignmentStyle];\n  }, [height, itemHeight, alignmentStyle]);\n  const labelContainerStyle = useMemo(() => {\n    return [{\n      position: 'absolute',\n      top: 0,\n      bottom: 0\n    }, alignmentStyle];\n  }, [alignmentStyle]);\n  const labelContainer = useMemo(() => {\n    return (// @ts-expect-error\n      <View style={labelContainerStyle} width={flatListWidth} pointerEvents=\"none\">\n        <View style={styles.label} centerV pointerEvents=\"none\">\n          <Text marginL-s2 marginR-s5 text80M {...labelProps} color={activeTextColor} style={labelStyle}>\n            {label}\n          </Text>\n        </View>\n      </View>\n    );\n  }, [flatListWidth, labelContainerStyle, label, labelProps, activeTextColor, labelStyle]);\n  const fader = useMemo(() => position => {\n    return <Fader visible position={position} size={60} />;\n  }, []);\n  const separators = useMemo(() => {\n    return <View absF centerV pointerEvents=\"none\">\n        <View style={styles.separators} />\n      </View>;\n  }, []);\n  return <View testID={testID} bg-white style={style}>\n      <View row centerH>\n        <View flexG>\n          <AnimatedFlatList testID={`${testID}.list`} height={height} data={items} // @ts-ignore reanimated2\n        keyExtractor={keyExtractor} scrollEventThrottle={100} onScroll={scrollHandler} onMomentumScrollEnd={onValueChange} showsVerticalScrollIndicator={false} onLayout={scrollToPassedIndex} // @ts-ignore\n        ref={scrollView} // @ts-expect-error\n        contentContainerStyle={contentContainerStyle} snapToInterval={itemHeight} decelerationRate={Constants.isAndroid ? 0.98 : 'normal'} renderItem={renderItem} getItemLayout={getItemLayout} initialScrollIndex={currentIndex} onContentSizeChange={updateFlatListWidth}\n        /* This fixes an issue with RTL when centering flatlist content using alignSelf */\n        centerContent={align === 'center' && Constants.isRTL} />\n        </View>\n      </View>\n      {label && labelContainer}\n      {fader(FaderPosition.BOTTOM)}\n      {fader(FaderPosition.TOP)}\n      {separators}\n    </View>;\n};\n\nWheelPicker.propTypes = {\n  /**\n     * Data source for WheelPicker\n     */\n  items: _pt.array,\n\n  /**\n     * Describe the height of each item in the WheelPicker\n     * default value: 44\n     */\n  itemHeight: _pt.number,\n\n  /**\n     * Describe the number of rows visible\n     * default value: 5\n     */\n  numberOfVisibleRows: _pt.number,\n\n  /**\n     * Text color for the focused row\n     */\n  activeTextColor: _pt.string,\n\n  /**\n     * Text color for other, non-focused rows\n     */\n  inactiveTextColor: _pt.string,\n\n  /**\n     * Additional label on the right of the item text\n     */\n  label: _pt.string,\n\n  /**\n     * Event, on active row change\n     */\n  onChange: _pt.func,\n\n  /**\n     * Support passing items as children props\n     */\n  children: _pt.oneOfType([_pt.element, _pt.arrayOf(_pt.element)]),\n\n  /**\n     * Align the content to center, right ot left (default: center)\n     */\n  align: _pt.oneOf([\"center\", \"right\", \"left\"]),\n  testID: _pt.string\n};\nWheelPicker.alignments = WheelPickerAlign;\nWheelPicker.displayName = 'Incubator.WheelPicker';\nexport default asBaseComponent(WheelPicker);\nexport { ItemProps as WheelPickerItemProps };\nconst styles = StyleSheet.create({\n  separators: {\n    borderTopWidth: 1,\n    borderBottomWidth: 1,\n    height: Spacings.s9,\n    borderColor: Colors.grey60\n  },\n  label: {\n    position: 'absolute',\n    right: 0,\n    top: 0,\n    bottom: 0\n  }\n});"]},"metadata":{},"sourceType":"module"}