{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport GameClass from \"../Classes/Game\";\nimport Flask from \"../Components/Flask\";\nimport WinModal from \"../Components/WinModal\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function Game(_ref) {\n  var level = _ref.level,\n      onNext = _ref.onNext;\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      modalVisible = _useState4[0],\n      setModalVisible = _useState4[1];\n\n  var _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      checkedData = _useState6[0],\n      setCheckedData = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      clickedBall = _useState8[0],\n      setClickedBall = _useState8[1];\n\n  var _useState9 = useState({}),\n      _useState10 = _slicedToArray(_useState9, 2),\n      config = _useState10[0],\n      setConfig = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      game = _useState12[0],\n      setGame = _useState12[1];\n\n  var init = useCallback(function () {\n    setData({});\n    setCheckedData({});\n    setClickedBall('');\n    setConfig({});\n    var gameClass = new GameClass();\n    gameClass.start(level);\n    setGame(gameClass);\n\n    if (gameClass) {\n      setData(gameClass.data);\n      setConfig(gameClass.currentComplications);\n    }\n  }, [level, setGame, setData, setCheckedData, setClickedBall, setConfig]);\n  var dataHandler = useCallback(function () {\n    if (data != null && data.mixedData) {\n      setCheckedData(game.checkWin(data.mixedData, data.flaskTotal));\n    }\n  }, [data, setCheckedData]);\n  var onClickFlask = useCallback(function (index) {\n    if (clickedBall === '' && data.mixedData[index].length) {\n      setClickedBall(index);\n    } else if (clickedBall !== '' && clickedBall === index) {\n      setClickedBall('');\n    } else if (clickedBall !== '' && game.canSet(index)) {\n      game.changeData(clickedBall, index);\n      setData(JSON.parse(JSON.stringify(game.data)));\n      setClickedBall('');\n    }\n  }, [clickedBall, data, setClickedBall, setData, game]);\n  var viewData = useMemo(function () {\n    if (data != null && data.mixedData) {\n      return data == null ? void 0 : data.mixedData.map(function (i, index) {\n        return _jsx(Flask, {\n          clickedBall: clickedBall === index,\n          isSuccess: checkedData[index],\n          onClick: function onClick() {\n            return onClickFlask(index);\n          },\n          total: data.flaskTotal[index],\n          ball: i,\n          config: config\n        }, i.toString() + index);\n      });\n    } else return _jsx(ActivityIndicator, {});\n  }, [data, game, config, onClickFlask, checkedData, clickedBall]);\n  var winHandler = useCallback(function () {\n    if (Object.values(checkedData).length && Object.values(checkedData).every(function (i) {\n      return i === true;\n    })) {\n      setModalVisible(true);\n    }\n  }, [checkedData, setModalVisible]);\n  var onClickNext = useCallback(function () {\n    setModalVisible(false);\n    onNext();\n  }, [setModalVisible, onNext]);\n  useEffect(init, [level]);\n  useEffect(dataHandler, data == null ? void 0 : data.mixedData);\n  useEffect(winHandler, [checkedData]);\n  return _jsxs(\"div\", {\n    className: \"game-container\",\n    children: [modalVisible && _jsx(WinModal, {\n      onClickNext: onClickNext,\n      modalVisible: modalVisible\n    }), viewData]\n  });\n}","map":{"version":3,"sources":["C:/Users/Lenovo/Desktop/Harut/game-expo/src/Containers/Game.js"],"names":["useCallback","useEffect","useMemo","useState","GameClass","Flask","WinModal","Game","level","onNext","data","setData","modalVisible","setModalVisible","checkedData","setCheckedData","clickedBall","setClickedBall","config","setConfig","game","setGame","init","gameClass","start","currentComplications","dataHandler","mixedData","checkWin","flaskTotal","onClickFlask","index","length","canSet","changeData","JSON","parse","stringify","viewData","map","i","toString","winHandler","Object","values","every","onClickNext"],"mappings":"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","sourcesContent":["import { useCallback, useEffect, useMemo, useState } from 'react';\r\nimport { ActivityIndicator } from 'react-native';\r\nimport GameClass from '../Classes/Game';\r\nimport Flask from '../Components/Flask';\r\nimport WinModal from '../Components/WinModal';\r\n\r\nexport default function Game({level, onNext}) {\r\n    const [data, setData] =useState({});\r\n    const [modalVisible, setModalVisible] = useState(false);\r\n    const [checkedData, setCheckedData] =useState({});\r\n    const [clickedBall, setClickedBall] = useState('');\r\n    const [config, setConfig] = useState({});\r\n    const [game, setGame] = useState(false);\r\n\r\n    const init = useCallback(()=> {\r\n        setData({});\r\n        setCheckedData({});\r\n        setClickedBall('');\r\n        setConfig({});\r\n        const gameClass = new GameClass();\r\n        gameClass.start(level);\r\n        setGame(gameClass);\r\n        if (gameClass){\r\n            setData(gameClass.data);\r\n            setConfig(gameClass.currentComplications);\r\n        }\r\n    }, [level, setGame, setData, setCheckedData, setClickedBall, setConfig]);\r\n\r\n    const dataHandler = useCallback(()=> {\r\n        if (data?.mixedData){\r\n            setCheckedData(game.checkWin(data.mixedData, data.flaskTotal))\r\n        }\r\n    }, [data, setCheckedData]);\r\n\r\n    const onClickFlask = useCallback((index)=>{\r\n        if (clickedBall === '' && data.mixedData[index].length){\r\n            setClickedBall(index);\r\n        } else if(clickedBall !== '' && clickedBall === index){\r\n            setClickedBall('');\r\n        } else if (clickedBall !== '' && game.canSet(index)){\r\n            game.changeData(clickedBall, index);\r\n            setData(JSON.parse(JSON.stringify(game.data)));\r\n            setClickedBall('');\r\n        }\r\n    }, [clickedBall, data, setClickedBall, setData, game]);\r\n\r\n    const viewData = useMemo(()=> {\r\n        if (data?.mixedData){\r\n            return data?.mixedData.map((i, index) => {\r\n                return <Flask\r\n                    clickedBall={clickedBall === index}\r\n                    isSuccess={checkedData[index]}\r\n                    onClick={() => onClickFlask(index)} \r\n                    total={data.flaskTotal[index]}\r\n                    key={i.toString() + index} \r\n                    ball={i}\r\n                    config={config} \r\n                   />\r\n            });\r\n        } else return <ActivityIndicator />;\r\n    }, [data, game, config, onClickFlask, checkedData, clickedBall]);\r\n\r\n    const winHandler = useCallback(()=> {\r\n        if (Object.values(checkedData).length && Object.values(checkedData).every(i=> i === true)){\r\n            setModalVisible(true);\r\n        }\r\n    }, [checkedData, setModalVisible]);\r\n    \r\n    const onClickNext = useCallback(()=>{\r\n        setModalVisible(false);\r\n        onNext();\r\n    }, [setModalVisible, onNext]);\r\n\r\n    useEffect(init, [level]);\r\n    useEffect(dataHandler, data?.mixedData);\r\n    useEffect(winHandler, [checkedData])\r\n\r\n    return (\r\n        <div className=\"game-container\">\r\n            {modalVisible && <WinModal onClickNext={onClickNext} modalVisible={modalVisible} />}\r\n            {viewData}\r\n        </div>\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}